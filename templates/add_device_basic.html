{% extends "base.html" %}
{% block content %}
  <h2>Добавить новое устройство (главная таблица)</h2>
  <form method="POST" id="device-add-form" novalidate>
    <div class="mb-3">
      <label class="form-label">Модель</label>
      <input name="model" class="form-control" maxlength="30" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Производитель</label>
      <select class="form-select" name="manufacturer_id" required>
        <option value="">Выберите</option>
        {% for m in manufacturers %}
          <option value="{{ m[0] }}">{{ m[1] }}</option>
        {% endfor %}
      </select>
      <a href="{{ url_for('add_row', table_name='manufacturers') }}" class="btn btn-link">Добавить производителя</a>
    </div>
    <div class="mb-3">
      <label class="form-label">Категория</label>
      <select class="form-select" name="category_id" required>
        <option value="">Выберите</option>
        {% for c in categories %}
          <option value="{{ c[0] }}">{{ c[1] }}</option>
        {% endfor %}
      </select>
      <a href="{{ url_for('add_row', table_name='categories') }}" class="btn btn-link">Добавить категорию</a>
    </div>
    <div class="mb-3">
      <label class="form-label">Операционная система</label>
      <select class="form-select" name="os_id" required>
        <option value="">Выберите</option>
        {% for os in operating_systems %}
          <option value="{{ os[0] }}">{{ os[1] }}</option>
        {% endfor %}
      </select>
      <a href="{{ url_for('add_row', table_name='operating_systems') }}" class="btn btn-link">Добавить ОС</a>
    </div>
    <div class="mb-3">
      <label class="form-label">Дата выпуска (ГГГГ-ММ-ДД)</label>
      <input name="release_date" class="form-control" type="date" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Цена (₽)</label>
      <input name="current_price" class="form-control" type="number" min="0" max="1000000" step="0.01" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Вес (граммы)</label>
      <input name="weight_grams" class="form-control" type="number" min="1" max="1000000" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Цвет</label>
      <select class="form-select" name="color_id" required>
        <option value="">Выберите</option>
        {% for color in colors %}
          <option value="{{ color[0] }}">{{ color[1] }}</option>
        {% endfor %}
      </select>
      <a href="{{ url_for('add_row', table_name='color') }}" class="btn btn-link">Добавить цвет</a>
    </div>
    <div class="mb-3">
      <label class="form-label">Водонепроницаемость</label>
      <select name="is_waterproof" class="form-select" required>
        <option value="1">Да</option>
        <option value="0">Нет</option>
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Гарантия (мес.)</label>
      <input name="warranty_months" class="form-control" type="number" min="1" max="24" required>
    </div>
    <button type="submit" class="btn btn-success">Сохранить</button>
    <a href="{{ url_for('table_view', table_name='devices') }}" class="btn btn-secondary">Назад</a>
  </form>
{% endblock %}
